网站的 html 代码就是一堆字符串，浏览器获取到这些字符串后，就开始按照自有的规则去解析，构建页面对应的 DOM 结构。

在将 html 字符串构建成 DOM 结构的过程中，如果遇到 `script` 标签，浏览器就会暂停 DOM 的构建，转而去执行 js 代码。直到 js 代码执行完毕，才会恢复对 DOM 的构建。而如果页面的 DOM 结构没有构建完毕，页面就会一直处于白屏的状态，所以如果需要嵌入`script`标签，应尽量放到 html 的后面去处理，防止因处理 `script` 花费大量时间造成页面长时间等待。`example01`就是个很好的例子。

其实不光 script 标签，css 样式文件也会延迟 DOM 的构建。

> CSS 是阻塞渲染的资源。需要将它尽早、尽快地下载到客户端，以便缩短首次渲染的时间。

针对 css，只要在 html 文本里写了，那浏览器就会去加载这些文件。所以除非必要的 css 文件，否则没必要也不应该出现在代码里。

如果一套代码，同时自适应 pc 和移动，那就要用到媒体查询功能，根据当前的视口等因素改变样式。如果自适应的样式简单可以直接跟其他的样式写在一起，如果很多，可以单独写成一个或一些文件，按照下面的方式去设置，当在正常 pc 打开时，这个样式文件并不会阻塞渲染，而是继续正常的渲染，但是这个文件依然会被加载。

```html
<link href="style.css" rel="stylesheet" media="(min-width: 40em)" />
```

DOMContent​Loaded vs load: load 是网页内容完全加载完，解析完，可以完全地使用了，这包括已经加载完外部的 css js img。而 DOMContent​Loaded 是 html 文档加载并解析完，此时已经有了完整的页面 DOM 结构了，可以看到页面的内容了（可能只是部分内容。此时叫页面的首次呈现），可以用代码访问元素了，但是还可以有后续的 css js img 加载操作。同时如果 script 和 css 标签在前面，那就会延后 DOM 的构建，也就延迟了页面的显示。

> [Navigation Timing API](https://developer.mozilla.org/zh-CN/docs/Web/API/Navigation_timing_API) 细粒度的评测页面的各个时间节点的耗时

尽量减少页面重定向的次数。比如分享别人网站 pc 链接`a.com`，然后再手机端就会重定向，打开`m.a.com`，这样子中间起码经历了先打开`a.com`，然后查询到当前为手机端又跳转至`m.a.com`，而在这一过程中用户始终处于等待的。应尽量减少这种情况，使用自适应设计网站，可以快速切换。

创建单独的渲染层，让可能频繁重绘的元素与其他元素分在不同层，每次尽量小的去更新显示，让 GPU 多使用缓存过的数据。常说的启用 GPU 加速，其实不是像有个按钮那样，按下就启动了某项 GPU 的黑科技，而是利用重排和重绘的不同去提升性能。重排就是重新排布，渲染层内的显示对象需要重新排布位置、大小，重绘就是重新绘制，比如某些显示对象的颜色发生改变。重排是 CPU 去通过算法计算出当前的最新布局，而重绘是利用 GPU 去更新视图显示。将频繁发生变化的对象放到一个单独的 layer 里，当重排和重绘时，只去更新它自己的信息，而其余的使用之前的缓存信息，减少计算量.这其实就是优化的基本准则的体现：减少要变化的对象。这个技巧不能乱用，如果乱用，那就是另一种极端(所有的都单独一个 layer 那就找事了)。

```css
transform: translateZ(0);
backface-visibility: hidden;
```

[性能相关（一）](https://imweb.io/topic/5b6fd3c13cb5a02f33c013bd)
[性能优化(二)](https://imweb.io/topic/5b4d417eee0c3b0779df96d9)
[google web fundamentals](https://developers.google.com/web/fundamentals/performance)
